/// Advanced Features Panel Component
/// Displays tool management, simulation mode, WCS, and soft limits

import { LineEdit, VerticalBox, HorizontalBox, ScrollView } from "std-widgets.slint";

export component AdvancedFeaturesPanel inherits VerticalBox {
    spacing: 0px;
    padding: 10px;
    horizontal-stretch: 1.0;
    vertical-stretch: 1.0;
    
    in property <string> advanced-features-mode: "None";
    in property <string> simulation-state: "Idle";
    
    ScrollView {
        VerticalBox {
            spacing: 10px;
            padding: 5px;
            horizontal-stretch: 1.0;
            vertical-stretch: 1.0;
            
            /// Header
            Rectangle {
                background: #9b59b6;
                height: 50px;
                
                VerticalBox {
                    padding: 8px;
                    alignment: center;
                    
                    Text {
                        text: "Advanced Features";
                        color: white;
                        font-size: 16px;
                        font-weight: 700;
                    }
                }
            }
            
            /// Tool Management Section
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "Tool Management";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    Rectangle {
                        height: 30px;
                        background: white;
                        border-width: 1px;
                        border-color: #bdc3c7;
                        border-radius: 3px;
                        
                        HorizontalBox {
                            padding: 5px;
                            spacing: 8px;
                            alignment: start;
                            
                            Text {
                                text: "Tool Change Mode:";
                                width: 40%;
                                vertical-alignment: center;
                                font-size: 11px;
                            }
                            Text {
                                text: root.advanced-features-mode;
                                width: 60%;
                                color: #3498db;
                                font-weight: 700;
                                vertical-alignment: center;
                                font-size: 11px;
                            }
                        }
                    }
                }
            }
            
            /// Simulation Section
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "Simulation Mode";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    Rectangle {
                        height: 30px;
                        background: white;
                        border-width: 1px;
                        border-color: #bdc3c7;
                        border-radius: 3px;
                        
                        HorizontalBox {
                            padding: 5px;
                            spacing: 8px;
                            alignment: start;
                            
                            Text {
                                text: "State:";
                                width: 40%;
                                vertical-alignment: center;
                                font-size: 11px;
                            }
                            Text {
                                text: root.simulation-state;
                                width: 60%;
                                color: root.simulation-state == "Running" ? #2ecc71 : 
                                       root.simulation-state == "Paused" ? #f39c12 : 
                                       root.simulation-state == "Completed" ? #27ae60 : #95a5a6;
                                font-weight: 700;
                                vertical-alignment: center;
                                font-size: 11px;
                            }
                        }
                    }
                }
            }
            
            /// Work Coordinate Systems
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "Work Coordinate Systems (G54-G59)";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    HorizontalBox {
                        spacing: 5px;
                        
                        for wcs in ["G54", "G55", "G56", "G57", "G58", "G59"] : Rectangle {
                            width: 16.5%;
                            height: 35px;
                            background: #3498db;
                            border-radius: 3px;
                            
                            Text {
                                text: wcs;
                                color: white;
                                font-size: 11px;
                                font-weight: 700;
                                horizontal-alignment: center;
                                vertical-alignment: center;
                            }
                        }
                    }
                }
            }
            
            /// Soft Limits Section
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "Soft Limits Configuration";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    HorizontalBox {
                        spacing: 10px;
                        
                        Rectangle {
                            width: 48%;
                            background: white;
                            height: 25px;
                            border-width: 1px;
                            border-color: #bdc3c7;
                            border-radius: 3px;
                            
                            HorizontalBox {
                                padding: 3px;
                                alignment: start;
                                spacing: 5px;
                                
                                Text {
                                    text: "Min:";
                                    font-size: 10px;
                                    width: 30%;
                                    vertical-alignment: center;
                                }
                                LineEdit {
                                    text: "-100";
                                    font-size: 10px;
                                }
                            }
                        }
                        
                        Rectangle {
                            width: 48%;
                            background: white;
                            height: 25px;
                            border-width: 1px;
                            border-color: #bdc3c7;
                            border-radius: 3px;
                            
                            HorizontalBox {
                                padding: 3px;
                                alignment: start;
                                spacing: 5px;
                                
                                Text {
                                    text: "Max:";
                                    font-size: 10px;
                                    width: 30%;
                                    vertical-alignment: center;
                                }
                                LineEdit {
                                    text: "+100";
                                    font-size: 10px;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
