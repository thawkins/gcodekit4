/// G-Code Editor Panel Component
/// Displays the G-code text editor with file operations toolbar

import { Button, LineEdit, TextEdit, VerticalBox, HorizontalBox, ScrollView } from "std-widgets.slint";

export component GcodeEditorPanel inherits VerticalBox {
    spacing: 0px;
    horizontal-stretch: 1.0;
    vertical-stretch: 1.0;
    
    in-out property <string> gcode-content: "";
    in-out property <string> gcode-filename: "untitled.gcode";
    
    callback menu-file-open();
    callback menu-file-save();
    callback menu-file-save-as();
    
    // File Operations Toolbar
    Rectangle {
        background: #ecf0f1;
        height: 120px;
        
        VerticalBox {
            padding: 10px;
            spacing: 8px;
            
            HorizontalBox {
                spacing: 15px;
                
                Button {
                    text: "Open File";
                    clicked => {
                        root.menu-file-open();
                    }
                }
                Button {
                    text: "Save";
                    enabled: root.gcode-content != "" && root.gcode-filename != "untitled.gcode";
                    clicked => {
                        root.menu-file-save();
                    }
                }
                Button {
                    text: "Save As";
                    enabled: root.gcode-content != "";
                    clicked => {
                        root.menu-file-save-as();
                    }
                }
                Button {
                    text: "Send";
                    enabled: root.gcode-content != "";
                    clicked => {
                        // Will implement send to machine
                    }
                }
            }
            
            HorizontalBox {
                spacing: 15px;
                
                Text {
                    text: "Filename:";
                    vertical-alignment: center;
                }
                LineEdit {
                    text <=> root.gcode-filename;
                    horizontal-stretch: 1.0;
                }
                Text {
                    text: "Ready";
                    color: green;
                    vertical-alignment: center;
                }
            }
        }
    }
    
    // G-Code Content Display
    Rectangle {
        background: #f5f5f5;
        horizontal-stretch: 1.0;
        vertical-stretch: 1.0;
        
        ScrollView {
            VerticalBox {
                TextEdit {
                    enabled: true;
                    text <=> root.gcode-content;
                    read-only: false;
                    wrap: word-wrap;
                }
            }
        }
    }
}
