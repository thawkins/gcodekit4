/// File Validation Panel Component
/// Displays file validation results and issues

import { VerticalBox, HorizontalBox, ScrollView } from "std-widgets.slint";

export component FileValidationPanel inherits VerticalBox {
    spacing: 0px;
    padding: 10px;
    horizontal-stretch: 1.0;
    vertical-stretch: 1.0;
    
    in property <[string]> validation-issues: [];
    in property <string> validation-summary: "No issues detected";
    in property <int> validation-error-count: 0;
    in property <int> validation-warning-count: 0;
    
    ScrollView {
        VerticalBox {
            spacing: 10px;
            padding: 5px;
            horizontal-stretch: 1.0;
            vertical-stretch: 1.0;
            
            /// Header
            Rectangle {
                background: #3498db;
                height: 50px;
                
                VerticalBox {
                    padding: 8px;
                    alignment: center;
                    
                    Text {
                        text: "File Validation Results";
                        color: white;
                        font-size: 16px;
                        font-weight: 700;
                    }
                }
            }
            
            /// Summary Stats
            HorizontalBox {
                spacing: 10px;
                
                Rectangle {
                    background: #2ecc71;
                    height: 60px;
                    width: 25%;
                    border-radius: 5px;
                    
                    VerticalBox {
                        padding: 8px;
                        alignment: center;
                        
                        Text {
                            text: "Valid";
                            color: white;
                            font-size: 11px;
                        }
                        Text {
                            text: root.validation-summary == "No issues detected" ? "✓" : "✗";
                            color: white;
                            font-size: 24px;
                            font-weight: 700;
                        }
                    }
                }
                
                Rectangle {
                    background: #e74c3c;
                    height: 60px;
                    width: 25%;
                    border-radius: 5px;
                    
                    VerticalBox {
                        padding: 8px;
                        alignment: center;
                        
                        Text {
                            text: "Errors";
                            color: white;
                            font-size: 11px;
                        }
                        Text {
                            text: root.validation-error-count;
                            color: white;
                            font-size: 24px;
                            font-weight: 700;
                        }
                    }
                }
                
                Rectangle {
                    background: #f39c12;
                    height: 60px;
                    width: 25%;
                    border-radius: 5px;
                    
                    VerticalBox {
                        padding: 8px;
                        alignment: center;
                        
                        Text {
                            text: "Warnings";
                            color: white;
                            font-size: 11px;
                        }
                        Text {
                            text: root.validation-warning-count;
                            color: white;
                            font-size: 24px;
                            font-weight: 700;
                        }
                    }
                }
                
                Rectangle {
                    background: #9b59b6;
                    height: 60px;
                    width: 25%;
                    border-radius: 5px;
                    
                    VerticalBox {
                        padding: 8px;
                        alignment: center;
                        
                        Text {
                            text: "Summary";
                            color: white;
                            font-size: 11px;
                        }
                        Text {
                            text: root.validation-summary;
                            color: white;
                            font-size: 12px;
                            font-weight: 700;
                            wrap: word-wrap;
                        }
                    }
                }
            }
            
            /// Issues List
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 5px;
                    horizontal-stretch: 1.0;
                    vertical-stretch: 1.0;
                    
                    Text {
                        text: "Validation Issues (" + root.validation-issues.length + ")";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    if root.validation-issues.length == 0 : Text {
                        text: "✓ No issues found. File is ready to use.";
                        color: #27ae60;
                        font-size: 11px;
                    }
                    
                    if root.validation-issues.length > 0 : VerticalBox {
                        spacing: 5px;
                        horizontal-stretch: 1.0;
                        for issue in root.validation-issues : Rectangle {
                            background: white;
                            border-width: 1px;
                            border-color: #bdc3c7;
                            border-radius: 3px;
                            height: 50px;
                            
                            HorizontalBox {
                                padding: 8px;
                                spacing: 8px;
                                alignment: start;
                                
                                Rectangle {
                                    width: 8px;
                                    background: #3498db;
                                    border-radius: 2px;
                                }
                                
                                VerticalBox {
                                    Text {
                                        text: issue;
                                        font-size: 11px;
                                        color: #2c3e50;
                                        wrap: word-wrap;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
