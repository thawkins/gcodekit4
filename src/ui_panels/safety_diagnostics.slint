/// Safety & Diagnostics Panel Component
/// Displays emergency stop, safety status, and system diagnostics

import { VerticalBox, HorizontalBox, ScrollView } from "std-widgets.slint";

export component SafetyDiagnosticsPanel inherits VerticalBox {
    spacing: 0px;
    padding: 10px;
    horizontal-stretch: 1.0;
    vertical-stretch: 1.0;
    
    in property <bool> emergency-stop-armed: true;
    in property <string> safety-status: "Safe";
    in property <string> diagnostics-info: "Ready";
    
    ScrollView {
        VerticalBox {
            spacing: 10px;
            padding: 5px;
            horizontal-stretch: 1.0;
            vertical-stretch: 1.0;
            
            /// Header
            Rectangle {
                background: #e74c3c;
                height: 50px;
                
                VerticalBox {
                    padding: 8px;
                    alignment: center;
                    
                    Text {
                        text: "Safety & Diagnostics";
                        color: white;
                        font-size: 16px;
                        font-weight: 700;
                    }
                }
            }
            
            /// Emergency Stop Section
            Rectangle {
                background: #ecf0f1;
                border-width: 2px;
                border-color: #c0392b;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "Emergency Stop";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    Rectangle {
                        height: 40px;
                        background: root.emergency-stop-armed ? #2ecc71 : #e74c3c;
                        border-radius: 5px;
                        
                        Text {
                            text: root.emergency-stop-armed ? "ðŸ›¡ ARMED - Ready" : "âš  TRIGGERED - Stopped";
                            color: white;
                            font-size: 12px;
                            font-weight: 700;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }
                    }
                }
            }
            
            /// Safety Status Section
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "Safety Status";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    HorizontalBox {
                        spacing: 10px;
                        
                        Rectangle {
                            width: 50%;
                            background: white;
                            height: 50px;
                            border-width: 1px;
                            border-color: #bdc3c7;
                            border-radius: 3px;
                            
                            VerticalBox {
                                padding: 5px;
                                alignment: center;
                                
                                Text {
                                    text: "Motion Interlock";
                                    font-size: 10px;
                                    color: #2c3e50;
                                }
                                Text {
                                    text: root.safety-status == "Safe" ? "âœ“ Enabled" : "âš  Disabled";
                                    font-size: 12px;
                                    color: root.safety-status == "Safe" ? #27ae60 : #e74c3c;
                                    font-weight: 700;
                                }
                            }
                        }
                        
                        Rectangle {
                            width: 50%;
                            background: white;
                            height: 50px;
                            border-width: 1px;
                            border-color: #bdc3c7;
                            border-radius: 3px;
                            
                            VerticalBox {
                                padding: 5px;
                                alignment: center;
                                
                                Text {
                                    text: "Feed Hold";
                                    font-size: 10px;
                                    color: #2c3e50;
                                }
                                Text {
                                    text: "Ready";
                                    font-size: 12px;
                                    color: #3498db;
                                    font-weight: 700;
                                }
                            }
                        }
                    }
                }
            }
            
            /// Diagnostics Info Section
            Rectangle {
                background: #ecf0f1;
                border-width: 1px;
                border-color: #bdc3c7;
                border-radius: 5px;
                
                VerticalBox {
                    padding: 10px;
                    spacing: 8px;
                    
                    Text {
                        text: "System Diagnostics";
                        font-size: 12px;
                        font-weight: 700;
                        color: #2c3e50;
                    }
                    
                    Text {
                        text: root.diagnostics-info;
                        font-size: 11px;
                        color: #34495e;
                        wrap: word-wrap;
                        font-family: "Monospace";
                    }
                }
            }
        }
    }
}
